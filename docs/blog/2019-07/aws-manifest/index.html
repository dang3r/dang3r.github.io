<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1" />
  <meta name="author" content="Daniel Cardoza">
  <meta name="description" content="A python package for retrieving information about aws api resources
and the actions that can be performed on them">
  
  <meta property="og:title" content="aws-manifest" />
<meta property="og:description" content="A python package for retrieving information about aws api resources
and the actions that can be performed on them" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://danielcardoza.com/blog/2019-07/aws-manifest/" />
<meta property="article:published_time" content="2019-07-31T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-07-31T00:00:00&#43;00:00"/>


  <title>
  
       aws-manifest | Daniel Cardoza 
  
  </title>

  <link rel="canonical" href="https://danielcardoza.com/blog/2019-07/aws-manifest/">

  
  

  
  <link href="https://danielcardoza.com/css/vendors-extensions/fontawesome/all.min.css" rel="stylesheet">

  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:300,400,500,600">
  <link href="https://danielcardoza.com/css/font.css" rel="stylesheet"> 
    
  
  <link href="https://danielcardoza.com/css/vendors/bootstrap4/bootstrap.min.css" rel="stylesheet">
  <link href="https://danielcardoza.com/css/vendors-extensions/mdb/mdb.min.css" rel="stylesheet"> 
  <link href="https://danielcardoza.com/css/vendors/mdb/style.min.css" rel="stylesheet"> 
  <link href="https://danielcardoza.com/css/main.css" rel="stylesheet">


  
  <link rel="shortcut icon"
  
      href="https://danielcardoza.com/images/avatar.jpg"
  
  >


  
  

  <style type="text/css">
      @media (min-width: 800px) and (max-width: 850px) {
              .navbar:not(.top-nav-collapse) {
                  background: #1C2331!important;
              }
          }
  </style>


  
    
    <link rel="stylesheet" href="https://danielcardoza.com/js/vendors/katex/katex.min.css">
  
  

  
    
    <link rel="stylesheet" href="https://danielcardoza.com/css/vendors/highlight/github-gist.css">
  

</head>

  <body class="bg-light" data-spy="scroll" data-target="#page-scrollspy" data-offset="90">
  
    
    

    
      


<nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="container">

      
      <a class="navbar-brand" href="https://danielcardoza.com">
          
        <img class="avatar" src="https://danielcardoza.com" style="width: 40px!important;height: auto;"  class="d-inline-block align-top" alt="" >
        
        <strong> Daniel Cardoza</strong>
      </a>

      
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      
      <div class="collapse navbar-collapse" id="navbarSupportedContent">

        
        <ul class="navbar-nav mr-auto ">
          <li class="nav-item ">
            <a class="nav-link" href="https://danielcardoza.com">Home</a>
          </li>
             
            <li class="nav-item ">
              <a class="nav-link" href="https://danielcardoza.com/blog/" >Blog  </a>
            </li>
          
             
            <li class="nav-item ">
              <a class="nav-link" href="https://danielcardoza.com/about/" >About  </a>
            </li>
          
          
        </ul>

      </div>

    </div>
  </nav>
  
 
      
 






<div id="site-header" class="carousel slide carousel-fade" data-ride="carousel" style="height: 18rem;" >  

  
  
  

  
  <div class="carousel-inner" role="listbox">
    
      

        
        <div class="carousel-item active">
          <div class="view" style="background-image: url('https://danielcardoza.com/header-slides/IMG_20180505_152803924_HDR.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

              
              
              

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://danielcardoza.com/header-slides//IMG_20180609_141709377.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://danielcardoza.com/header-slides//IMG_20180712_172017391_HDR.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://danielcardoza.com/header-slides//IMG_20180907_165527989_HDR.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://danielcardoza.com/header-slides//IMG_20181028_133814794_HDR.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://danielcardoza.com/header-slides//fores.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://danielcardoza.com/header-slides//received_2397222100289440.jpeg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    

  
  </div>
  

  
  <div class="carousel-content text-center white-text wow fadeIn">
    <div class="row mx-0 headfont mt-3 pt-4">
      
      <div class="col-12 col-sm-5 align-middle">
        <a href="https://danielcardoza.com">
          
            <img class="pull-right avatar avatar-md" src="https://danielcardoza.com/images/avatar.jpg" alt="" >
          
        </a>
      </div>
      
      <div class="col-12 col-sm-7 text-left pl-2">
        <a href="https://danielcardoza.com">
          <h1 class="mb-2 h1" style="font-weight: 300;" >
            <strong>Daniel Cardoza</strong>
          </h1>
        </a>
        

             
        <div class="mt-2" style="font-size: 1rem; color: white;">
            
              <a href="//github.com/dang3r" target="_blank" rel="noopener"><i class="fab fa-github pr-1" aria-hidden="true"></i></a>    
            
            
              <a href="//linkedin.com/in/dcardoza" target="_blank" rel="noopener"><i class="fab fa-linkedin pr-1" aria-hidden="true"></i></a>
            

            

            

            
                <a href="//twitter.com/_dcardoza" target="_blank" rel="noopener"><i class="fab fa-twitter pr-1" aria-hidden="true"></i></a>
            

            
                <a href="//instagram.com/dancards" target="_blank" rel="noopener"><i class="fab fa-instagram pr-1" aria-hidden="true"></i></a>
            
    
            
    
        
            
                <a href="mailto:dan@danielcardoza.com"><i class="far fa-envelope-open pr-1" aria-hidden="true"></i></a>
            
    
            

            
        </div>
      </div>
    </div>
  </div>
  

  
  
  

</div>
  
    

    
  
  <main class="post-main-wrapper">
    
    
    <div class="row">

      

      
      <div class="container pr-5">
      

        
        <div class="z-depth-1  post-wrapper white-bg single-post">

          <div class="post-header text-center" >
  <ul class="post-meta li-x">
    
    
  </ul>

  <div class="px-4 post-heading">aws-manifest</div>

  <ul class="post-meta li-x mt-1">
    
      <li>Jul 31, 2019</li>
    

    
      <li class="middot"></li>
      <li>2 minutes read</li>
    
  </ul>
  

</div>


          <div class="post-content markdown">
            

<p><strong>TL:DR</strong> <code>pip install aws-manifest</code> / <a href="https://github.com/dang3r/aws-manifest">https://github.com/dang3r/aws-manifest</a></p>

<p>I recently needed to retrieve a list of all Amazon Web Services (AWS) services, and
actions that could be called on them. I wanted to answer questions such as &ldquo;What
are all of the api actions that can be done for ec2?&ldquo;.</p>

<p>There is no API for doing so from AWS, so I started looking for other options.
Some projects scrape the AWS documentation and extract the data from the markup.
This is how projects like <a href="https://iam.cloudonaut.io/">https://iam.cloudonaut.io/</a> work. You can see the code they use
for scraping and parsing in their github repo <a href="https://github.com/widdix/complete-aws-iam-reference/tree/master/tools">here</a>.</p>

<p>I haven&rsquo;t been able to find the thread on the aws forums, but I recall someone mentioning
you could scrape or get the data from <a href="https://awspolicygen.s3.amazonaws.com/policygen.html">https://awspolicygen.s3.amazonaws.com/policygen.html</a>.
Awspolicygen is a tool for generating aws policies for their services.</p>

<p>This started my shallow dive into doing this.</p>

<h3 id="extracting-a-manifest-of-aws-apis-and-services">Extracting a manifest of aws apis and services</h3>

<p>The site looks exactly like you&rsquo;d expect.</p>

<p><img src="https://danielcardoza.com/images/s3_policygen.png" alt="AWS-S3-PolicyGen" /></p>

<p>Looking at the assets it loads, I saw an interesting <code>policies.js</code> bundle.</p>

<p><img src="https://danielcardoza.com/images/s3_policygen_assets.png" alt="AWS-S3-PolicyGen-Assets" /></p>

<p>Inspecting its content, it is just assigning an object to a global variable.
<img src="https://danielcardoza.com/images/s3_policygen_asset_js.png" alt="AWS-S3-PoliyGen-Js-Bundle" /></p>

<p>If you remove the assignment to the variable, and put it into Jsonlint, you get
a valid json file.</p>

<p><img src="https://danielcardoza.com/images/s3_polygen_jsonlint.png" alt="Jsonlint" /></p>

<p>After analyzing the object, it had all of the necessary information to answer
the question. I wanted to use ask these questions from Python, so I made
<code>aws-manifest</code></p>

<h3 id="aws-manifest">aws-manifest</h3>

<p>The package provides an easy interface for getting access to the full manifest,
and answering simple questions. It is able to either remotely pull down
the latest version of the manifest, or use one bundled with the package.</p>

<pre><code>&gt;&gt; from awsmanifest import manifest, AwsManifest

# Retrieve the latest set of aws resources
&gt;&gt; m = manifest()
&gt;&gt; print(m[&quot;serviceMap&quot;][&quot;Amazon EC2&quot;][&quot;Actions&quot;])

# Retrieve the bundled local copy of aws resources
&gt;&gt; m = manifest(local=True)

# For helper functions, use the `AwsManifest` class
a = AwsManifest()
print(a.service_prefixes())
print(a.actions(&quot;Amazon EC2&quot;))
print(a.actions(&quot;s3&quot;))
</code></pre>

<p>After publishing to pypi and github, I decided to search for references
to the javascript file. Lo and behold, <a href="https://github.com/search?p=1&amp;q=https%3A%2F%2Fawspolicygen.s3.amazonaws.com%2Fjs%2Fpolicies.js&amp;type=Code">https://github.com/search?p=1&amp;q=https%3A%2F%2Fawspolicygen.s3.amazonaws.com%2Fjs%2Fpolicies.js&amp;type=Code</a>.</p>

<p>Its cool to see how common this workaround is.</p>

          </div>

          
          <div class="row">
            <div class="col-md-8">
            
              <div class="mb-5">
                
<div class="li-x div-x post-meta">
  <li class="pr-0"><a href="https://danielcardoza.com/tags/"><i class="fas fa-tags"></i></a></li>
  <div class="tags-sm">
    
      <li><a href="https://danielcardoza.com/tags/blog" role="button">blog </a></li>
      
    
      <li><a href="https://danielcardoza.com/tags/project" role="button">project </a></li>
      
    
  </div>
</div>
              </div>
            
            </div>
            
          </div>
          

          
          <div class="row pt-3">
            <div class="col-md-6">
              
                <a href=https://danielcardoza.com/blog/2019-06/stratocumulus.cloud/ class="post-meta">Previous
                  <div class="pt-2 pb-5 d-flex">
                    <i class="fas fa-angle-left text-grey font-weight-bold mr-2 active-color"></i>
                    <span>Stratocumulus.cloud</span>
                  </div>
                </a>
              
            </div>
            
            <div class="col-md-6 text-right" >
              
            </div>
          </div>

          

        </div>
        

      </div>
      

      

    </div>
    


  </main>
  


    
    

<footer class="page-footer text-center font-small mt-4 wow fadeIn">


  
  <div class="pb-2 mt-5 pt-5">
    
      <a href="//github.com/dang3r " target="_blank" rel="noopener"><i class="fab fa-github mr-3" aria-hidden="true"></i></a>    
    
    
      <a href="//linkedin.com/in/dcardoza" target="_blank" rel="noopener"><i class="fab fa-linkedin-in mr-3" aria-hidden="true"></i></a>
    

    

    

    
        <a href="//twitter.com/_dcardoza" target="_blank" rel="noopener"><i class="fab fa-twitter mr-3" aria-hidden="true"></i></a>
    

    
        <a href="//instagram.com/dancards" target="_blank" rel="noopener"><i class="fab fa-instagram mr-3" aria-hidden="true"></i></a>
    

    


    
        <a href="mailto:dan@danielcardoza.com"><i class="far fa-envelope-open mr-3" aria-hidden="true"></i></a>
    

    

    

  </div>
  

  
  <div class="copyright py-4">
    
    <span>  2016 - 2019 &copy; | Theme <a href='https://github.com/orianna-zzo/AllinOne' target="_blank">AllinOne</a> by <a href='https://github.com/orianna-zzo' target="_blank">Orianna</a>  </span>
  </div>
  

</footer>


    






<script type="text/javascript" src="https://danielcardoza.com/js/vendors/jquery/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="https://danielcardoza.com/js/vendors/jquery/jquery.smooth-scroll.min.js"></script>



<script type="text/javascript" src="https://danielcardoza.com/js/vendors/popper.min.js"></script>
<script type="text/javascript" src="https://danielcardoza.com/js/vendors/holder.min.js"></script>
<script type="text/javascript" src="https://danielcardoza.com/js/vendors-extensions/bootstrap4/bootstrap.js" ></script>

<script type="text/javascript" src="https://danielcardoza.com/js/vendors/mdb/mdb.min.js"></script>

<script type="text/javascript" src="https://danielcardoza.com/js/main.js"></script>



  
  <script src="https://danielcardoza.com/js/vendors/highlight.pack.js"> </script>
  <script>hljs.initHighlightingOnLoad();</script>




 
  <script src="https://danielcardoza.com/js/vendors/katex/katex.min.js"> </script>
  <script src="https://danielcardoza.com/js/vendors/katex/contrib/auto-render.min.js"></script>

  <script>
      document.addEventListener("DOMContentLoaded", function () {
          renderMathInElement(document.body);
      });
  </script>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-138252403-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



<script type="text/javascript">
  
  new WOW().init();
</script>




  </body>
</html>